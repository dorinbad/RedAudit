============================= test session starts ==============================
platform darwin -- Python 3.14.2, pytest-9.0.2, pluggy-1.6.0 -- /Users/dorin/Documents/AntiGravity/RedAudit/.venv/bin/python
cachedir: .pytest_cache
rootdir: /Users/dorin/Documents/AntiGravity/RedAudit
configfile: pytest.ini
plugins: asyncio-1.3.0, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 1 item

tests/test_coverage_aggressive_batch8.py::TestAggressiveCoverageBatch8::test_ask_choice_with_back_navigation_input
————————————————————————————————————————————————————————————
? q
  > 1. o1
DEBUG: input called with ('\nselect_opt [1-1] (1): ',), returning 1

————————————————————————————————————————————————————————————
? q
  > 1. o1
DEBUG: input called with ('\nselect_opt [1-1] (1): ',), returning back
DEBUG: input called with ('\nselect_opt [1-1] (1): ',), returning extra1
DEBUG: input called with ('\nselect_opt [1-1] (1): ',), returning extra2
FAILED

=================================== FAILURES ===================================
___ TestAggressiveCoverageBatch8.test_ask_choice_with_back_navigation_input ____
tests/test_coverage_aggressive_batch8.py:96: in test_ask_choice_with_back_navigation_input
    self.assertEqual(self.app.ask_choice_with_back("q", ["o1"]), -1)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
redaudit/core/wizard.py:506: in ask_choice_with_back
    ans = input(f"\n{self.t('select_opt')} [{prompt_range}] ({default + 1}): ").strip()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/unittest/mock.py:1175: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/unittest/mock.py:1179: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/unittest/mock.py:1240: in _execute_mock_call
    result = effect(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^
tests/test_coverage_aggressive_batch8.py:91: in side_effect
    v = vals.pop(0)
        ^^^^^^^^^^^
E   IndexError: pop from empty list
=========================== short test summary info ============================
FAILED tests/test_coverage_aggressive_batch8.py::TestAggressiveCoverageBatch8::test_ask_choice_with_back_navigation_input - IndexError: pop from empty list
============================== 1 failed in 0.16s ===============================
